function Anicanvas(b){this.canvasObject=document.getElementById(b);this.context=this.canvasObject.getContext("2d");this.carray=[];this.addShape=function(a){this.carray.push({id:a.id,shape:a.shape,props:a});AniHandler.draw({id:a.id,shape:a.shape,props:a},this.context,this.canvasObject)};this.moveShape=function(a,b,c){a=AniHandler.findById(this.carray,a);console.log(a);a.props.x="string"==typeof b&&"+"==b.charAt(0)?a.props.x+parseInt(b.substring(1)):"string"==typeof b&&"-"==b.charAt(0)?a.props.x-parseInt(b.substring(1)):
b;a.props.y="string"==typeof c&&"+"==c.charAt(0)?a.props.y+parseInt(c.substring(1)):"string"==typeof c&&"-"==c.charAt(0)?a.props.y-parseInt(c.substring(1)):c;AniHandler.redraw(this.context,this.carray,this.canvasObject)};this.animateShape=function(a,b,c,e){e/=2;var f=AniHandler.findById(this.carray,a);AniHandler.animate(a,b,c,(f.props.x-b)/e,(f.props.y-c)/e,f.props.x,f.props.y,this)}}
var AniHandler={animate:function(b,a,d,c,e,f,h,g){0.5>Math.abs(f-a)&&0.5>Math.abs(h-d)||(g.moveShape(b,f,h),setTimeout(function(){AniHandler.animate(b,a,d,c,e,f-c,h-e,g)},1))},findById:function(b,a){for(var d=0;d<b.length;d++)if(b[d].id===a)return b[d]},draw:function(b,a,d){var c=function(a,b){return"undefined"!=typeof a?a:b},e={arc:function(e,h){a.beginPath();a.arc(c(b.props.x,d.width/2),c(b.props.y,d.height/2),c(b.props.radius,10),c(b.props.sAngle,e),c(b.props.eAngle,h),c(b.props.counterclockwise,
!1));var g=a.fillStyle,j=a.strokeStyle,k=a.lineWidth;a.fillStyle=b.props.color||g;a.fill();a.lineWidth=c(b.props.strokeWidth,k);a.strokeStyle=b.props.stroke||j;a.stroke();a.fillStyle=g;a.strokeStyle=j;a.lineWidth=k},rectangle:function(e,h){a.beginPath();a.rect(c(b.props.x,d.width/2),c(b.props.y,d.height/2),c(b.props.width,e),c(b.props.height,h));var g=a.fillStyle,j=a.strokeStyle,k=a.lineWidth;a.fillStyle=b.props.color||g;a.fill();a.lineWidth=c(b.props.strokeWidth,k);a.strokeStyle=b.props.stroke||
j;a.stroke();a.fillStyle=g;a.strokeStyle=j;a.lineWidth=k}};switch(b.shape){case "circle":e.arc(0,2*Math.PI);break;case "semicircle":e.arc(0,Math.PI);break;case "arc":e.arc(0,Math.PI/2);break;case "rectangle":e.rectangle(20,10)}},redraw:function(b,a,d){b.clearRect(0,0,d.width,d.height);for(var c=0;c<a.length;c++)AniHandler.draw(a[c],b,d)}};
